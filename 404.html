<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>SPA Redirect</title>
    <script type="text/javascript">
      // Single Page Apps for GitHub Pages
      // MIT License
      // https://github.com/rafgraph/spa-github-pages
      // This script takes the current url and converts the path and query
      // string into just a query string, and then redirects the browser
      // to the new url with only a query string and hash fragment,
      // e.g. https://www.foo.tld/one/two?a=b#hash -> https://www.foo.tld/?/one/two&a=b#hash
      // Note: this 404.html file must be at least 512 bytes for Internet Explorer
      // to display it, rather than a friendly error page.

      var pathSegmentsToKeep = 1; // For /repo-name/ style paths on GitHub Pages

      var l = window.location;
      var segment = l.pathname.split('/').slice(0, 1 + pathSegmentsToKeep).join('/');
      var newPath = l.pathname.slice(segment.length);
      
      // If the path is empty (i.e., we are at the root of the segment, like /repo-name/)
      // and there's no query string or hash, just redirect to index.html in the segment.
      // This handles the case where someone types "yourname.github.io/repo-name/"
      if (newPath === '' && l.search === '' && l.hash === '') {
        l.replace(segment + '/index.html');
      } else {
        // Otherwise, redirect to index.html with the path as part of the query string
        l.replace(segment + '/index.html?p=' + encodeURIComponent(newPath.slice(1)) + 
                  (l.search ? '&q=' + encodeURIComponent(l.search.slice(1)) : '') + 
                  l.hash);
      }

    </script>
  </head>
  <body>
    <!-- Must be over 512 bytes for IE -->
    If you are not redirected automatically, please <a id="redirect-link" href="#">click here</a>.
    <script type="text/javascript">
        var l = window.location;
        var segment = l.pathname.split('/').slice(0, 1 + 1).join('/'); // Assuming 1 segment for repo name
        var newPath = l.pathname.slice(segment.length);

        var targetUrl = segment + '/index.html?p=' + encodeURIComponent(newPath.slice(1)) +
                        (l.search ? '&q=' + encodeURIComponent(l.search.slice(1)) : '') +
                        l.hash;
        if (newPath === '' && l.search === '' && l.hash === '') {
            targetUrl = segment + '/index.html';
        }
        document.getElementById('redirect-link').href = targetUrl;
    </script>
  </body>
</html> 